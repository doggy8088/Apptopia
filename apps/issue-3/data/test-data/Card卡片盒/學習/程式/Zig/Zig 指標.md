---
tags:
  - 程式語言/C
  - 程式語言/C加加
  - 程式語言/Zig
aliases:
來源:
  - https://codeberg.org/ziglings/exercises/#ziglings
  - https://course.ziglang.cc
  - https://www.runoob.com/zig/zig-tutorial.html
新建日期: 2026-02-14 02:28:23
---

# 指標

[C ++ 指標](../C_C++/C++%20指標.md)裡真的是一個很麻煩又複雜的東西
但Zig全部簡化掉

一樣 `*`代表指標宣告 `&`代表取址，但最厲害是`.*`代表解指標
對，`.*`這樣設計省的一直數星星問題


```zig
const std = @import("std");

pub fn main() void {
    const value: u8 = 32;
    const ptr = &value;
    const deref = ptr.*;

    std.debug.print("Pointer: {}, Deref: {}", .{ ptr, deref });
}
```

# 指標讀法

Zig為了避免C的語法導致無法解讀
所以關於指針讀法是**一律由左往右**
並且關於變數是否可以改變是強制拆開，
像是`const * const [48:0]u8`這種C語法的Zig不會出現
要改成`const p : * const [48:0]u8`必須拆成兩段

舉例:
`[]const u8`
1. []代表切片
2. const代表唯讀，唯讀什麼??看下一個
3. u8
4. 所以拼起來就是一個 **唯讀的u8切片**

`*const [48:0]u8`
1. *  是指標
2. const 唯讀，唯讀什麼??看下一個
3. [48:0] 指的是 48 + 1(尾巴是0)陣列
4. u8
5. 所以拼起來就是一個 **一個指著唯讀49格的u8陣列空間的指標**

## AI給的
怕不懂
這是Gpt給的規則

以下是 **Zig 指標 / Slice / Array 可變性總表（完整速查版）**  
已涵蓋所有實務最常見合法組合與語義判定規則。

---

# 🧠 Zig Mutability 總覽表

## 一、指標類型

|宣告|指標能改指向|指向內容能改|說明|
|---|---|---|---|
|`var p: *u8`|✅|✅|完全可變|
|`var p: *const u8`|✅|❌|唯讀資料指標|
|`const p: *u8`|❌|✅|固定地址但資料可改|
|`const p: *const u8`|❌|❌|完全唯讀|

---

## 二、Slice 類型

|宣告|slice能改指向|slice內容能改|說明|
|---|---|---|---|
|`var s: []u8`|✅|✅|完全可變|
|`var s: []const u8`|✅|❌|唯讀資料視圖|
|`const s: []u8`|❌|✅|固定視圖但資料可改|
|`const s: []const u8`|❌|❌|完全唯讀|

---

## 三、固定陣列指標

|宣告|指標可改|陣列內容可改|
|---|---|---|
|`var p: *[49]u8`|✅|✅|
|`var p: *const [49]u8`|✅|❌|
|`const p: *[49]u8`|❌|✅|
|`const p: *const [49]u8`|❌|❌|

---

## 四、規則總結（編譯器級）

Zig mutability 判定順序：

```
1️⃣ 看變數宣告 const / var → 決定「能不能重新指向」
2️⃣ 看 * 或 [] 後是否 const → 決定「能不能改內容」
3️⃣ 看資料型別是否 const → 決定「資料本體是否唯讀」
```

---

## 五、視覺記憶圖（最推薦）

```
const p: *const []const u8
│      │      │
│      │      └── 元素不可改
│      └──────── slice不可改
└────────────── p不可改
```

---

## 六、專業工程師速判公式

看到型別直接拆三層：

```
變數層 → 指標層 → 資料層
```

只要判斷每層是否 const 即可。

---

# 🎯 最終一句話心法

> Zig 的 const 永遠只鎖「它右邊那一層」，永不跨層影響。

---

如果你要，我可以再幫你生成一張  
**「所有 Zig 型別修飾優先序 + AST 結構圖」**  
那張會直接讓你看到任何複雜型別都能瞬間解析。
