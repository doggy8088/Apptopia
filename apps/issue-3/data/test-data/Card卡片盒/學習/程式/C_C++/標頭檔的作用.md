---
tags : 
- 程式語言/C 
- 程式語言/C加加 
aliases :
- 头文件的作用
來源 :
- https://www.bilibili.com/video/BV1Ce4y1U7No
- https://www.bilibili.com/video/BV1q24y197wJ/?share_source=copy_web&vd_source=25481608d8c6a8616f5a36f674ebd840
- https://www.bilibili.com/video/BV1Hv4y1e7DC/?share_source=copy_web&vd_source=25481608d8c6a8616f5a36f674ebd840
- https://www.bilibili.com/video/BV1rb411d7mS/?p=11&share_source=copy_web&vd_source=25481608d8c6a8616f5a36f674ebd840
新建日期 : 2022-12-26 23:02:02
---

標頭檔是放在C/C++ Cpp最前面引入的設定
包含 **宏定義(也叫常數定義)(define)** **結構聲明(Struct)** **函式定義(function)**
如果Cpp需要使用特定Function就需要引入對應的.h標頭檔

而標頭檔實際用途一句話說明就是
## 把 .h 裡的東西複製到 .cpp 上面
所以實際上 .h 不一定要跟 .cpp同一個名稱，但如果名稱亂來會造成除錯困難
所以如果 .h 裡面有定義函式，大部分都會將實作放在同名.cpp裡面

至於為何 .h 要這樣設計
這裡主要牽扯到C/C++編譯上問題
C/C++編譯簡化理解
#### Cpp => 編譯 => 鏈接 => 輸出

編譯器會將每個Cpp文件**單獨** 編譯成字節碼
在編譯Cpp時遇到邏輯裡有 **不知名函式(也就是該cpp裡面沒有這個函式)** 時，編譯器會報錯
所以編譯器會要求需要 **定義函式**(就是只有函式名稱，但沒有實際邏輯)
而 .h 就是省略一直寫的步驟，將.h內容(也就是定義函式)直接複製到Cpp裡面

之後編譯器會記錄，並將該Cpp下有關該**定義函式**的部分，全部記錄起來
當到鏈接部分時，就會去找**定義函式實作**部分，把所有有引入.h標頭檔的Cpp函式做個鏈接起來
這樣當Cpp執行到該**定義函式**時就會去找**實作**部分執行

這樣C/C++就實現 **復用**、**實作定義拆解**
最重要的，就是不用再Cpp一直重複打函式宣告

但也因為.h是直接複製過去的，所以必須在.h裡做的防護 ^0fa65b
```C++
#ifndef _宏變數_
#define _宏變數_
	定義函式	
	定義函式	
	定義函式	
#endif
```
透過**ifndef**，當**define**不存在時，才將.h複製過去，以避免Cpp裡有兩次重複定義的函式

> [!tip] 另一種.h防護
> .h防護還可以用  **\#pragma once** 這編譯器指令防護
